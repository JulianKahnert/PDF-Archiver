name: UnitTest
on:
  push:
    branches:
      - master
      - develop
  pull_request:
    branches:
      - master
      - develop
jobs:
  macos:
    # runs-on: macOS-latest
    runs-on: macos-11.0
    steps:
      - name: Checkout
        uses: actions/checkout@v1
      - name: Build and Test
        run: cd ArchiveCore && swift test --enable-code-coverage
        env:
          DEVELOPER_DIR: /Applications/Xcode_12.2.app/Contents/Developer
  # linux:
  #   runs-on: ubuntu-latest
  #   container:
  #     image: swift:5.3
  #     options: --cap-add=SYS_PTRACE --security-opt seccomp=unconfined --security-opt apparmor=unconfined
  #   steps:
  #     - name: Checkout
  #       uses: actions/checkout@v1
  #     - name: Build and Test
  #       run: cd ArchiveCore && swift test --enable-code-coverage